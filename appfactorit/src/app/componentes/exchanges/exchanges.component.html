<app-head [usuario]="usuario_nombre"></app-head>
<div class="container">
    <div>
        <div><h1 class="text-white">Elige el exchange de tu preferencia para continuar con la compra de: {{moneda_string}}</h1></div>
        <div class="row">
            <div *ngFor="let exchange of exchangesMayores" class="card bg-secondary text-white m-3 transicion" style="width: 30%;">
                <img class="card-img-top" src="{{exchange.url_imagen}}" alt="logo {{exchange.name}}" style="width: 100%;">
                <div class="card-body">
                    <div class="card-title">{{exchange.name}}</div>
                    <p class="card-text">Volumen mensual operado: U$S{{exchange.volume_1mth_usd}}</p>
                    <button href="#" class="btn btn-block btn-danger" (click)="completarForm(exchange.name)" data-bs-toggle="modal" data-bs-target="#modalCompra" style="width: 100%; height: 55px;">Comprar!</button>
                </div>
            </div>
        </div>
    </div>
</div>>

<div class="modal fade" id="modalCompra">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header">
          <h4 class="modal-title">Comprar cripto </h4>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
            <form class="was-validated">
                <div class="row mb-3">
                    <div class="col-4">
                        <label for="moneda" class="form-label">Moneda</label>
                    </div>
                    <div class="col-8">
                        <input type="text" class="form-control" id="moneda" [(ngModel)]="moneda_seleccionada" name="moneda" readonly>
                    </div>
                </div>
                <div class="row mb-3">
                    <div class="col-4">
                        <label for="rate" class="form-label">Valor en USD:</label>
                    </div>
                    <div class="col-8">
                        <input type="text" class="form-control" id="rate" [(ngModel)]="rate_moneda" name="rate" readonly>
                    </div>
                </div>
                <div class="row mb-3">
                    <div class="col-4">
                        <label for="comision" class="form-label">Comision exchange:</label>
                    </div>
                    <div class="col-8">
                        <input type="number" step=".01" class="form-control" id="comision" [(ngModel)]="comision_exchange" name="comision" readonly>
                    </div>
                </div>
                <div class="row mb-3">
                    <div class="col-4">
                        <label for="cantidad" class="form-label">Cantidad:</label>
                    </div>
                    <div class="col-8">
                        <input type="number" class="form-control" step=".01" (input)="calcularTotal()" id="cantidad" [(ngModel)]="cantidad_moneda" name="cantidad" required>
                    </div>
                </div>
                <div class="row mb-3">
                    <div class="col-4">
                        <label for="total" class="form-label">Total: $</label>
                    </div>
                    <div class="col-8">
                        <input type="text" class="form-control" id="total" [(ngModel)]="total_transaccion" name="total" readonly>
                    </div>
                </div>
            </form>
        </div>
        <div class="modal-footer">
            <div class="container">
                <button type="button" class="btn btn-block btn-success" data-bs-dismiss="modal" (click)="comprar()">Comprar!!</button>
            </div>
        </div>
      </div>
    </div>
  </div>
